{% comment %}
    Template à inclure pour afficher un post
    Args: post, données du post à afficher
          bg_color, couleur du background du post
          btn_lire_commentaire, booleen pour spécifier si le lien "Lire les commentaires" doit être présent (par défaut à False)
          btn_like, booleen pour spécifier si le bouton pour liker le post doit être présent (par défaut à False)
{% endcomment %}

<div class="{{ bg_color }} mb-4">

    <div class="row py-2 px-1 {{ bg_color }}">

        <div class="col-sm-3 m-b-15 d-block"> {# colonne 1: priorité, info evenementiel et bouton like #}
            {% if request.user not in post.lecteurs.all %}
                <h3 class="text-left text-dark font-italic">
                    <i class="fa fa-circle" style="font-size:20px;color:blue"></i>
                    Nouveau post !
                </h3>
            {% endif %}
            <h3 class="text-left text-dark">Priorite {{ post.priorite }}</h3>
            <span class="comment-widgets">
                {% if post.evenementiel %}
                    <h4 class="font-medium text-left">
                        <i class="fas fa-glass-cheers mr-2 my-1"></i> EVENT <br>
                        <i class="fas fa-calendar-week mr-2 my-1"></i> {{ post.date_evenement }} <br>

                    </h4>
                {% endif %}
                {% if btn_like %}
                    <h4 class="font-medium text-left">
                        {% if request.user in post.likes.all %}
                            <a href="{% url 'liker' post.id %}" data-toggle="tooltip" title="Unlike">
                                <i class="fas fa-thumbs-up mt-3 " style='font-size:20px'></i>
                            </a>
                        {% else %}
                            <a href="{% url 'liker' post.id %}" data-toggle="tooltip" title="Like">
                                <i class="far fa-thumbs-up mt-3" style='font-size:20px'></i>
                            </a>
                        {% endif %}
                        {{ post.likes.count }}
                    </h4>
                {% endif %}
            </span>
        </div>

        <div class="col-sm-6"> {# colonne 2: titre et description #}
            <h3 class="m-b-15 d-block">
                <span class="text-center">
                    <a class="{% if request.user in post.lecteurs.all and btn_lire_commentaire %} {# Change font si le post a été lu et que ce n'est pas la page du post #}
                        font-weight-normal text-body
                    {% else %}
                        font-weight-bold text-dark
                    {% endif %}"
                       href="{% url "post" post_id=post.id %}" data-toggle="tooltip" title="Accéder au post">
                        {{ post.title|capfirst }}
                    </a>
                    {% if user == post.auteur %}
                        <a href="{% url 'update_post' post.id %}" data-toggle="tooltip" title="Modifier ce post">
                        <i class="far fa-edit"></i>
                        </a>
                    {% endif %}
                </span>
            </h3>
            <span class="m-b-15 d-block"> <p class="text-justify">{{ post.description |linebreaks }}</p></span>
        </div>

        <div class="col-sm-3"> {# colonne 3: temps depuis la creation du post, communaute, auteur et lien vers les commentaires #}
            <div class="comment-footer">
                <span class="text-muted float-right">
                    <i class="far fa-clock"></i> {{ post.date_creation|timesince:date_now|linebreaks }}
                    <i class="fas fa-users"></i>
                    <a class="text-muted" href="{% url "communaute" post.communaute.id %}" data-toggle="tooltip" title="Accéder à cette communauté">
                        {{ post.communaute|linebreaks }}
                    </a>
                    <i class="fas fa-user-edit"></i> {{ post.auteur }}
                    {% if btn_lire_commentaire %}
                        <p><a href="{% url "post" post_id=post.id %}">Lire les commentaires</a></p>
                    {% endif %}
                </span>
            </div>
        </div>

    </div>

    <hr> {# delimitation pour marquer la fin du post #}
</div>